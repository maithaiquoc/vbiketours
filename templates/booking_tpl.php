<?php include _template."layout/dongchu.php"; ?>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="js/jquery-1.11.1.js"></script>
</head>
<div class="hide-sm" id="belong-anywhere-wrapper">
  <div id="ja-container" class="wrap ">
	<div class="main clearfix">

		<div id="ja-mainbody" style="width:100%">
			<!-- CONTENT -->
        <div id="ja-main" style="width:100%">
        <div class="inner clearfix">               
        
            
            <div id="ja-contentwrap" class="">
                        <div id="ja-content" class="column" style="width:100%">
        
                    <div id="ja-current-content" class="column" style="width:100%">
                                        
                                        <div class="ja-content-main clearfix">
                                <script type="text/javascript">var selectedDays = '12/31/2014,1/1/2015,1/4/2015,2/17/2015,2/18/2015,2/19/2015,2/20/2015,2/21/2015,2/22/2015,2/23/2015,2/24/2015,4/30/2015,5/1/2015,9/2/2015';var selectedDaysT1 = '12/12/2011,1/2/2015';var selectedDaysT2 = '12/12/2011,10/6/2014,10/7/2014,10/24/2014,1/2/2015,1/3/2015,1/6/2015,1/17/2015,3/15/2015';var selectedDaysT3 = '8/31/2014,10/6/2014,1/2/2015,1/3/2015,1/5/2015,1/7/2015,1/10/2015,1/17/2015,4/8/2015';var selectedDaysT4 = '10/6/2014,1/2/2015,1/3/2015,1/5/2015,1/7/2015,1/10/2015,1/17/2015,4/8/2015';var offDaysAnnounce = "Sorry, this tour date is not available. Please email or call us for more details.";var offDaysT1Announce = "The Sights tour is not available on this date. Please email or call us for more details.";var offDaysT2Announce = "The Shopping Spree tour is not available on this date. Please email or call us for more details.";var offDaysT3Announce = "The Saigon by Night tour is not available on this date. Please email or call us for more details.";var offDaysT4Announce = "The Foodie tour is not available on this date. Please email or call us for more details.";var DVDedDaysMorning = '12/29/2014,12/30/2014,1/3/2015,1/7/2015,2/6/2015,2/8/2015,2/9/2015,2/10/2015,2/11/2015,2/12/2015,2/13/2015,2/14/2015,2/15/2015,2/16/2015,2/25/2015,3/25/2015,4/20/2015,4/22/2015,10/28/2015';var DVDedDaysEvening = '12/27/2014,12/28/2014,12/29/2014,12/30/2014,1/2/2015,1/3/2015,1/5/2015,1/7/2015,1/8/2015,1/9/2015,1/10/2015,1/11/2015,1/17/2015,1/18/2015,1/20/2015,2/6/2015,2/7/2015,2/8/2015,2/9/2015,2/10/2015,2/11/2015,2/12/2015,2/13/2015,2/14/2015,2/15/2015,2/16/2015,2/25/2015,3/8/2015,3/14/2015,3/15/2015,3/18/2015,3/24/2015,3/30/2015,4/19/2015,4/21/2015,4/22/2015,10/28/2015';var DVDOffDaysAnnounce = "Sorry! The helmet video option is not available on this date.  You can still book this tour date without the video option.";</script><script type="text/javascript">var minEvening = new Date("January 2, 2015");var minMorning = new Date("January 3, 2015");</script><form method="post" id="userForm" onsubmit="return Check();" enctype="multipart/form-data" action="#"><div class="componentheading" xmlns="http://www.w3.org/1999/html">VBIKETOURS Booking Form</div>
        <input type="hidden" name="form[T1DateFormatForSQLMapping]" id="T1DateFormatForSQLMapping" value="0000-00-00">
        <input type="hidden" name="form[T2DateFormatForSQLMapping]" id="T2DateFormatForSQLMapping" value="0000-00-00">
        <input type="hidden" name="form[T3DateFormatForSQLMapping]" id="T3DateFormatForSQLMapping" value="0000-00-00">
        <input type="hidden" name="form[T4DateFormatForSQLMapping]" id="T4DateFormatForSQLMapping" value="0000-00-00">
        <input type="hidden" name="form[T1StateForSQLMapping]" id="T1StateForSQLMapping" value="0">
        <input type="hidden" name="form[T2StateForSQLMapping]" id="T2StateForSQLMapping" value="0">
        <input type="hidden" name="form[T3StateForSQLMapping]" id="T3StateForSQLMapping" value="0">
        <input type="hidden" name="form[T4StateForSQLMapping]" id="T4StateForSQLMapping" value="0">
        <input type="hidden" name="form[CountryName]" id="CountryName" value="">
        <input type="hidden" name="form[DepositT1]" id="DepositT1" value="0">
        <input type="hidden" name="form[DepositT2]" id="DepositT2" value="0">
        <input type="hidden" name="form[DepositT3]" id="DepositT3" value="0">
        <input type="hidden" name="form[DepositT4]" id="DepositT4" value="0">
        <div class="rsform-block-hidden" style="display:none;">
            <dl>
                <dd title="validate function"><input type="text" value="validate" size="20" name="form[Validate]" id="Validate" style="display:none;" class="rsform-input-box"></dd>
                <dd title="exchange rate"><input type="hidden" name="form[ExchangeRate]" id="ExchangeRate" value="21,000"></dd>
                <dd title="hidden title"><input type="hidden" name="form[TitleHidden]" id="TitleHidden" value="Mr./Ms."></dd>
                <dd title="number of tours"><input type="hidden" name="form[NumberofTours]" id="NumberofTours" value=""></dd>
                <dd title="names of tours"><input type="hidden" name="form[NameofTours]" id="NameofTours" value=""></dd>
                <dd title="tour1 details"><input type="hidden" name="form[Tour1Details]" id="Tour1Details" value=""></dd>
                <dd title="tour2 details"><input type="hidden" name="form[Tour2Details]" id="Tour2Details" value=""></dd>
                <dd title="tour3 details"><input type="hidden" name="form[Tour3Details]" id="Tour3Details" value=""></dd>
                <dd title="tour4 details"><input type="hidden" name="form[Tour4Details]" id="Tour4Details" value=""></dd>
                <dd title="hidden deposit"><input type="hidden" name="form[DepositHidden]" id="DepositHidden" value=""></dd>
                <dd title="hidden payment"><input type="hidden" name="form[PaymentHidden]" id="PaymentHidden" value=""></dd>
                <dd title="hidden booking details"><input type="hidden" name="form[BookingDetails]" id="BookingDetails" value=""></dd>
                <dd title="hidden notice before submit"><input type="hidden" name="form[NoticeBeforeSubmit]" id="NoticeBeforeSubmit" value="Submitting this form &lt;strong&gt;DOES NOT&lt;/strong&gt; mean that your tour is booked. Your booking is only finalized once you receive and reply to our confirmation email. If you do not hear back from us within 24 hours of your booking request, please check your SPAM or JUNK MAIL folder."></dd>
                <dd title="hidden notice"><input type="hidden" name="form[ShortNoticeBookingAnnounce]" id="ShortNoticeBookingAnnounce" value="You are trying to book a tour on very short notice.  If possible, please call us at 09 3308 3727 (or +84 93308 3727 if you are dialing from an international phone number) so that we can confirm availability.  Thank you!"></dd>
                <dd title="hidden notice"><input type="hidden" name="form[DenyShortNoticeBookingAnnounce]" id="DenyShortNoticeBookingAnnounce" value="You are trying to book large group less than 24 hours before your tour date.  In order to book this tour, you will have to phone us at 09 3308 3727 or +84 93308 3727."></dd>
                <dd title="hidden notice"><input type="hidden" name="form[ReDenyShortNoticeBookingAnnounce]" id="ReDenyShortNoticeBookingAnnounce" value="This booking cannot be accepted online.  Please phone us at 09 3308 3727 or +84 93308 3727 in order to book this tour."></dd>
                <dd title="paypal"><input type="hidden" name="rsfp_paypal_item[]" value="0">
                            <input type="hidden" name="form[rsfp_Product]" id="rsfp_Product" value="Paypal"></dd>
                <dd title="paypal"><span id="paypal_total_8" class="rsform_paypal_total">0.00</span> USD <input type="hidden" id="PaypalTotal" value="0.00" name="form[PaypalTotal]"></dd>
            </dl>
        </div>
        
        <script type="text/javascript">
            var rate = parseInt(CommaUnFormatted(document.getElementById('ExchangeRate').value));
        </script>
        <script type="text/javascript">
            //<![CDATA[
        
            //t means tour
            var toffDays = selectedDays.split(',');
            var tunADaysTour1 = selectedDaysT1.split(',');
            var tunADaysTour2 = selectedDaysT2.split(',');
            var tunADaysTour3 = selectedDaysT3.split(',');
            var tunADaysTour4 = selectedDaysT4.split(',');
            var offDays = convertDateFormat(toffDays);
            var unADaysTour1 = convertDateFormat(tunADaysTour1);
            var unADaysTour2 = convertDateFormat(tunADaysTour2);
            var unADaysTour3 = convertDateFormat(tunADaysTour3);
            var unADaysTour4 = convertDateFormat(tunADaysTour4);
            //
            var tunADVDDaysMorning = DVDedDaysMorning.split(',');
            var tunADVDDaysEvening = DVDedDaysEvening.split(',');
            var unADVDDaysMorning = convertDateFormat(tunADVDDaysMorning);
            var unADVDDaysEvening = convertDateFormat(tunADVDDaysEvening);
            //]]>
        </script>
        <div class="rsform-header-text"><p>To book a tour, please fill out the form below. If you do not want to prepay for your tour now, we also allow our customers (groups of 4 or less) to pay in either US Dollars or Vietnamese Dong on the day of their tour(s).  Please note that we will not be able to accept credit card payments within 24 hours of the tour date.</p>
        
        <p style="color:#e2227c;"> We require a 20% deposit for:
        </p><p></p>
        <p style="color: #e2227c;">1. Guests that do not yet have a hotel reservation.</p>
        <p></p>
        <p style="color: #e2227c;">2. Groups larger than 4 people</p>
        <p></p>
        <p style="color: #e2227c;">**** If you break up a larger group in order to avoid paying the deposit, we will not be able to guarantee that everyone in your party will be put in the same tour group. Thank you for understanding. ****</p>
        
        <p></p>
        
        <p>For answers to most common questions, please read our <a href="http://xotours.vn/faq.html" target="_blank">FAQ</a>.</p>
        
        <p>If you are looking to book a tour within 1 day of your desired tour date, we recommend calling us at <strong>090 3 378 266</strong> if you are dialing from an international number) so that we can quickly confirm availability.</p></div>
        <div class="booking-form-legend">Which tour(s) do you want to book?</div>
        <div class="rsform-content rsf-price-group">
            <?php
            $d->reset();
            $sql_dep="select id,ten_$lang, spmoi, gia from #_product where hienthi =1 and noibat>0 order by stt,id desc limit 10";
            $d->query($sql_dep);
            $result_tieubieu=$d->result_array();

             if(!empty($result_tieubieu)){$index = 0; $totalProduct = count($result_tieubieu);
                for($j=0,$count_cc=count($result_tieubieu);$j<$count_cc;$j++){$index += 1;
            ?>
            <div class="rsform-tour-options rsform-tour4">
                <input type="hidden" id="idProduct<?php echo $j ?>" value="<?php echo $result_tieubieu[$j]['id'] ?>">
                <input type="hidden" id="idPrice<?php echo $j ?>" value="<?php echo $result_tieubieu[$j]['gia'] ?>">
                <div><strong><input name="form[Tour4][]" type="checkbox" value="<?php echo $result_tieubieu[$j]['ten_vi']; ?>" id="Tour40<?php echo $j ?>" onclick="addTour();"><label for="Tour40"><?=catchuoi($result_tieubieu[$j]["ten_$lang"],120)?></label></strong></div>
                
                <div class="rsfc-tourdetails" id="tourdetail4" style="display: none;">
                    <div class="rsfc-line">
                        <div class="rsfcl-caption-qtt">Number of People</div>
                        <div class="rsfcl-body-qtt"><select name="form[QuantityTour4][]" id="QuantityTour4" class="tour-quantity-select rsform-select-box" disabled=""><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option></select><span id="component154" class="formNoError">Invalid Input</span></div>
                        <div class="deposittext" id="deposittexttour4"></div>
                    </div>
                    <div class="rsfc-line">
                        <div class="rsfcl-body-indent"><input name="form[HelmetCamVideo4][]" type="checkbox" value="35" id="HelmetCamVideo40" onclick="CheckDVD(4);Change();" disabled=""><label for="HelmetCamVideo40">I want to add the helmet video option! + $35</label>&nbsp;-&nbsp;<span style="color:blue;cursor:pointer;" onclick="HelmetVideoExplanation(4);">Learn more</span></div>
                        <div style="display:none;" id="hve-4" class="rsfcl-body"><p>You only need to book 1 helmet video per party. Two of our employees will follow behind you and your guide with a specially mounted helmet camera and film your Vietnam adventure. We will then choose the best parts from the video and then edit it with some fun music and effects. We will email you a link to download your video (in about 2 weeks) once it's done.</p>
        <p>Our video editor is the best in the business! We spend a lot time to professionally edit your video and make sure it's something you would be proud to show your friends and family. Check out our <a href="http://xotours.vn/gallery.html" target="_blank">Gallery</a> to see pictures and videos from our tours!</p></div>
                    </div>
                    <div class="rsfc-line">
                        <div class="rsfcl-body-indent">
                            <div class="rsfcl-body-indent"><input name="form[Tour4MakePrivate][]" type="checkbox" value="30" id="Tour4MakePrivate0" onclick="Change();ChangeT4Time();" disabled=""><label for="Tour4MakePrivate0">I want to make this a private tour! (Additional $30 per person; minimum of 2 people)</label></div>
                        </div>
                    </div>
                    <div class="rsfc-line">
                        <div class="rsfcl-caption">Tour Date (<span style="color:red;">*</span>)</div>
                        <div class="rsfcl-body"><input id="txtcal8_3" name="form[TourDate4]" type="text" readonly="readonly" value="" onchange="Change();" class="rsform-calendar-box" disabled=""><input id="btn8_3" type="button" value="..." onclick="showHideCalendar(&#39;cal8_3Container&#39;);" class="btnCal rsform-calendar-button" onchange="Change();" disabled=""><div id="cal8_3Container" style="clear:both;display:none;position:absolute;z-index:9962" class="yui-calcontainer single"><table cellspacing="0" class="yui-calendar y2015" id="cal8_3">
        <thead>
        <tr>
        <th colspan="7" class="calhead">
        <div class="calheader">
        <a class="calnavleft" href="http://xotours.vn/booking.html#">Previous Month (December 2014)</a>
        <a class="calnav" href="http://xotours.vn/booking.html#">January 2015</a>
        <a class="calnavright" href="http://xotours.vn/booking.html#">Next Month (February 2015)</a>
        </div>
        </th>
        </tr>
        <tr class="calweekdayrow">
        <th class="calweekdaycell">Su</th>
        <th class="calweekdaycell">Mo</th>
        <th class="calweekdaycell">Tu</th>
        <th class="calweekdaycell">We</th>
        <th class="calweekdaycell">Th</th>
        <th class="calweekdaycell">Fr</th>
        <th class="calweekdaycell">Sa</th>
        </tr>
        </thead>
        <tbody class="m1 calbody">
        <tr class="w1">
        <td class="calcell oom calcelltop calcellleft" id="cal8_3_cell0">28</td>
        <td class="calcell oom calcelltop" id="cal8_3_cell1">29</td>
        <td class="calcell oom calcelltop" id="cal8_3_cell2">30</td>
        <td class="calcell oom calcelltop" id="cal8_3_cell3">31</td>
        <td class="calcell wd4 d1 today previous calcelltop" id="cal8_3_cell4">1</td>
        <td class="calcell wd5 d2 selectable calcelltop" id="cal8_3_cell5"><a href="http://xotours.vn/booking.html#" class="selector">2</a></td>
        <td class="calcell wd6 d3 selectable calcelltop calcellright" id="cal8_3_cell6"><a href="http://xotours.vn/booking.html#" class="selector">3</a></td>
        </tr>
        <tr class="w2">
        <td class="calcell wd0 d4 selectable calcellleft" id="cal8_3_cell7"><a href="http://xotours.vn/booking.html#" class="selector">4</a></td>
        <td class="calcell wd1 d5 selectable" id="cal8_3_cell8"><a href="http://xotours.vn/booking.html#" class="selector">5</a></td>
        <td class="calcell wd2 d6 selectable" id="cal8_3_cell9"><a href="http://xotours.vn/booking.html#" class="selector">6</a></td>
        <td class="calcell wd3 d7 selectable" id="cal8_3_cell10"><a href="http://xotours.vn/booking.html#" class="selector">7</a></td>
        <td class="calcell wd4 d8 selectable" id="cal8_3_cell11"><a href="http://xotours.vn/booking.html#" class="selector">8</a></td>
        <td class="calcell wd5 d9 selectable" id="cal8_3_cell12"><a href="http://xotours.vn/booking.html#" class="selector">9</a></td>
        <td class="calcell wd6 d10 selectable calcellright" id="cal8_3_cell13"><a href="http://xotours.vn/booking.html#" class="selector">10</a></td>
        </tr>
        <tr class="w3">
        <td class="calcell wd0 d11 selectable calcellleft" id="cal8_3_cell14"><a href="http://xotours.vn/booking.html#" class="selector">11</a></td>
        <td class="calcell wd1 d12 selectable" id="cal8_3_cell15"><a href="http://xotours.vn/booking.html#" class="selector">12</a></td>
        <td class="calcell wd2 d13 selectable" id="cal8_3_cell16"><a href="http://xotours.vn/booking.html#" class="selector">13</a></td>
        <td class="calcell wd3 d14 selectable" id="cal8_3_cell17"><a href="http://xotours.vn/booking.html#" class="selector">14</a></td>
        <td class="calcell wd4 d15 selectable" id="cal8_3_cell18"><a href="http://xotours.vn/booking.html#" class="selector">15</a></td>
        <td class="calcell wd5 d16 selectable" id="cal8_3_cell19"><a href="http://xotours.vn/booking.html#" class="selector">16</a></td>
        <td class="calcell wd6 d17 selectable calcellright" id="cal8_3_cell20"><a href="http://xotours.vn/booking.html#" class="selector">17</a></td>
        </tr>
        <tr class="w4">
        <td class="calcell wd0 d18 selectable calcellleft" id="cal8_3_cell21"><a href="http://xotours.vn/booking.html#" class="selector">18</a></td>
        <td class="calcell wd1 d19 selectable" id="cal8_3_cell22"><a href="http://xotours.vn/booking.html#" class="selector">19</a></td>
        <td class="calcell wd2 d20 selectable" id="cal8_3_cell23"><a href="http://xotours.vn/booking.html#" class="selector">20</a></td>
        <td class="calcell wd3 d21 selectable" id="cal8_3_cell24"><a href="http://xotours.vn/booking.html#" class="selector">21</a></td>
        <td class="calcell wd4 d22 selectable" id="cal8_3_cell25"><a href="http://xotours.vn/booking.html#" class="selector">22</a></td>
        <td class="calcell wd5 d23 selectable" id="cal8_3_cell26"><a href="http://xotours.vn/booking.html#" class="selector">23</a></td>
        <td class="calcell wd6 d24 selectable calcellright" id="cal8_3_cell27"><a href="http://xotours.vn/booking.html#" class="selector">24</a></td>
        </tr>
        <tr class="w5">
        <td class="calcell wd0 d25 selectable calcellleft" id="cal8_3_cell28"><a href="http://xotours.vn/booking.html#" class="selector">25</a></td>
        <td class="calcell wd1 d26 selectable" id="cal8_3_cell29"><a href="http://xotours.vn/booking.html#" class="selector">26</a></td>
        <td class="calcell wd2 d27 selectable" id="cal8_3_cell30"><a href="http://xotours.vn/booking.html#" class="selector">27</a></td>
        <td class="calcell wd3 d28 selectable" id="cal8_3_cell31"><a href="http://xotours.vn/booking.html#" class="selector">28</a></td>
        <td class="calcell wd4 d29 selectable" id="cal8_3_cell32"><a href="http://xotours.vn/booking.html#" class="selector">29</a></td>
        <td class="calcell wd5 d30 selectable" id="cal8_3_cell33"><a href="http://xotours.vn/booking.html#" class="selector">30</a></td>
        <td class="calcell wd6 d31 selectable calcellright" id="cal8_3_cell34"><a href="http://xotours.vn/booking.html#" class="selector">31</a></td>
        </tr>
        <tr class="w6">
        <td class="calcell oom calcellleft calcellbottom" id="cal8_3_cell35">1</td>
        <td class="calcell oom calcellbottom" id="cal8_3_cell36">2</td>
        <td class="calcell oom calcellbottom" id="cal8_3_cell37">3</td>
        <td class="calcell oom calcellbottom" id="cal8_3_cell38">4</td>
        <td class="calcell oom calcellbottom" id="cal8_3_cell39">5</td>
        <td class="calcell oom calcellbottom" id="cal8_3_cell40">6</td>
        <td class="calcell oom calcellright calcellbottom" id="cal8_3_cell41">7</td>
        </tr>
        </tbody>
        </table></div><input id="hiddencal8_3" type="hidden" name="hidden[TourDate4]"><span id="component167" class="formNoError">Invalid Input</span></div>
                    </div>
                    <div class="rsfc-line">
                        <div class="rsfcl-caption">Tour Time</div>
                        <div class="rsfcl-body"><select name="form[TourTime4][]" id="TourTime4" onclick="Change();" class="rsform-select-box" disabled=""><option value="4:30 PM (private tour only)" disabled="">4:30 PM (private tour only)</option><option value="5:30 PM">5:30 PM</option></select><span id="component168" class="formNoError">Invalid Input</span><span style="color: red; display: none;" id="TourTime4Explanation">* Start time is 1 hour earlier than our regular Foodie tour</span></div>
                    </div>
                    <div class="rsfc-line">
                        <div class="rsfcl-caption">Things I can't eat /<br> I am allergic to</div>
                        <div class="rsfcl-body"><textarea cols="50" rows="3" name="form[Tour4FoodNotes]" id="Tour4FoodNotes" onchange="Change();" class="rsform-text-box" disabled=""></textarea></div>
                    </div>
                    <div class="rsfc-line rsfc-line-outdent">
                        <div class="rsfcl-caption-stt">Subtotal:</div>
                        <div class="rsfcl-body-stt"><input type="text" value="0" size="5" name="form[SubTotal4]" id="SubTotal4" readonly="readonly" class="sub-total-input rsform-input-box"></div>
                    </div>
                    <hr>
                </div>
            </div>
            <?php }}?>
          
            <hr class="style-2" style="margin:20px 0;">
            <div style="text-align:center;">Want to design your own tour? Click <a href="http://xotours.vn/booking/private-tour.html">HERE</a> to go to our Custom Tour Booking Form.</div>
        </div>
        <div class="booking-form-legend">Tell us about yourself</div>
        <div class="rsform-content rsf-contact-group">
            <div class="rsfc-line">
                <div class="rsfcl-caption">Title (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><select name="form[Title][]" id="Title" onclick="ChangeTitle();" class="rsform-select-box"><option value=""></option><option value="Ms.">Ms.</option><option value="Mr.">Mr.</option></select>
              <!--  <span id="component177" class="formNoError">Title is missing.</span>-->
                
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">First Name (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body">
                <input type="text" value="" size="20" name="form[FirstName]" id="FirstName" class="rsform-input-box">
               <!-- <span id="component133" class="formNoError">First Name is missing.</span>-->
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Last Name (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body">
                <input type="text" value="" size="20" name="form[LastName]" id="LastName" class="rsform-input-box">
               <!-- <span id="component134" class="formNoError">Last Name is missing.</span>-->
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Email Address (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><input type="text" value="" size="20" name="form[EmailAddress]" id="EmailAddress" class="rsform-input-box">
              <!--  <span id="component135" class="formNoError">Email Address is missing or incorrect.</span>-->
                
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Re-enter Your Email (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><input type="text" value="" size="20" name="form[ReEmailAddress]" id="ReEmailAddress" class="rsform-input-box"><!--<span id="component136" class="formNoError">Email Address is missing or mismatch.</span>-->
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Nationality (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><select name="form[Country][]" id="Country" onchange="CountryChange();" class="rsform-select-box"><option value=""></option><option value="af">Afghanistan</option><option value="al">Albania</option><option value="dz">Algeria</option><option value="as">American Samoa</option><option value="ad">Andorra</option><option value="ao">Angola</option><option value="ai">Anguilla</option><option value="aq">Antarctica</option><option value="ag">Antigua and Barbuda</option><option value="ar">Argentina</option><option value="am">Armenia</option><option value="aw">Aruba</option><option value="au">Australia</option><option value="at">Austria</option><option value="az">Azerbaijan</option><option value="bs">Bahamas</option><option value="bh">Bahrain</option><option value="bd">Bangladesh</option><option value="bb">Barbados</option><option value="by">Belarus</option><option value="be">Belgium</option><option value="bz">Belize</option><option value="bj">Benin</option><option value="bm">Bermuda</option><option value="bt">Bhutan</option><option value="bo">Bolivia</option><option value="ba">Bosnia and Herzegovina</option><option value="bw">Botswana</option><option value="bv">Bouvet Island</option><option value="br">Brazil</option><option value="io">British Indian Ocean Territory</option><option value="bn">Brunei Darussalam</option><option value="bg">Bulgaria</option><option value="bf">Burkina Faso</option><option value="bi">Burundi</option><option value="kh">Cambodia</option><option value="cm">Cameroon</option><option value="ca">Canada</option><option value="cv">Cape Verde</option><option value="ky">Cayman Islands</option><option value="cf">Central African Republic</option><option value="td">Chad</option><option value="cl">Chile</option><option value="cn">China</option><option value="cx">Christmas Island</option><option value="cc">Cocos (Keeling) Is.</option><option value="co">Colombia</option><option value="km">Comoros</option><option value="cg">Congo</option><option value="ck">Cook Islands</option><option value="cr">Costa Rica</option><option value="ci">Cote D'ivoire</option><option value="hr">Croatia</option><option value="cu">Cuba</option><option value="cy">Cyprus</option><option value="cz">Czech Republic</option><option value="dk">Denmark</option><option value="dj">Djibouti</option><option value="dm">Dominica</option><option value="do">Dominican Republic</option><option value="ec">Ecuador</option><option value="eg">Egypt</option><option value="sv">El Salvador</option><option value="gq">Equatorial Guinea</option><option value="er">Eritrea</option><option value="ee">Estonia</option><option value="et">Ethiopia</option><option value="fk">Falkland Islands (Malvinas)</option><option value="fo">Faroe Islands</option><option value="fj">Fiji</option><option value="fi">Finland</option><option value="fr">France</option><option value="gf">French Guiana</option><option value="pf">French Polynesia</option><option value="tf">French Southern Territories</option><option value="ga">Gabon</option><option value="gm">Gambia</option><option value="ge">Georgia</option><option value="de">Germany</option><option value="gh">Ghana</option><option value="gi">Gibraltar</option><option value="gr">Greece</option><option value="gl">Greenland</option><option value="gd">Grenada</option><option value="gp">Guadeloupe</option><option value="gu">Guam</option><option value="gt">Guatemala</option><option value="gg">Guernsey</option><option value="gn">Guinea</option><option value="gw">Guinea-bissau</option><option value="gy">Guyana</option><option value="ht">Haiti</option><option value="hn">Honduras</option><option value="hk">Hong Kong</option><option value="hu">Hungary</option><option value="is">Iceland</option><option value="in">India</option><option value="id">Indonesia</option><option value="ir">Iran</option><option value="iq">Iraq</option><option value="ie">Ireland</option><option value="im">Isle of Man</option><option value="il">Israel</option><option value="it">Italy</option><option value="jm">Jamaica</option><option value="jp">Japan</option><option value="je">Jersey</option><option value="jo">Jordan</option><option value="kz">Kazakhstan</option><option value="ke">Kenya</option><option value="ki">Kiribati</option><option value="kp">Korea North</option><option value="kr">Korea South</option><option value="kw">Kuwait</option><option value="kg">Kyrgyzstan</option><option value="la">Lao</option><option value="lv">Latvia</option><option value="lb">Lebanon</option><option value="ls">Lesotho</option><option value="lr">Liberia</option><option value="ly">Libyan Arab Jamahiriya</option><option value="li">Liechtenstein</option><option value="lt">Lithuania</option><option value="lu">Luxembourg</option><option value="mo">Macao</option><option value="mk">Macedonia</option><option value="mg">Madagascar</option><option value="mw">Malawi</option><option value="my">Malaysia</option><option value="mv">Maldives</option><option value="ml">Mali</option><option value="mt">Malta</option><option value="mh">Marshall Islands</option><option value="mq">Martinique</option><option value="mr">Mauritania</option><option value="mu">Mauritius</option><option value="yt">Mayotte</option><option value="mx">Mexico</option><option value="fm">Micronesia</option><option value="md">Moldova</option><option value="mc">Monaco</option><option value="mn">Mongolia</option><option value="me">Montenegro</option><option value="ms">Montserrat</option><option value="ma">Morocco</option><option value="mz">Mozambique</option><option value="mm">Myanmar</option><option value="na">Namibia</option><option value="nr">Nauru</option><option value="np">Nepal</option><option value="nl">Netherlands</option><option value="an">Netherlands Antilles</option><option value="nc">New Caledonia</option><option value="nz">New Zealand</option><option value="ni">Nicaragua</option><option value="ne">Niger</option><option value="ng">Nigeria</option><option value="nu">Niue</option><option value="nf">Norfolk Island</option><option value="mp">Northern Mariana Islands</option><option value="no">Norway</option><option value="om">Oman</option><option value="pk">Pakistan</option><option value="pw">Palau</option><option value="ps">Palestinian Territory Occupied</option><option value="pa">Panama</option><option value="pg">Papua New Guinea</option><option value="py">Paraguay</option><option value="pe">Peru</option><option value="ph">Philippines</option><option value="pn">Pitcairn</option><option value="pl">Poland</option><option value="pt">Portugal</option><option value="pr">Puerto Rico</option><option value="qa">Qatar</option><option value="re">Reunion</option><option value="ro">Romania</option><option value="ru">Russian Federation</option><option value="rw">Rwanda</option><option value="sh">Saint Helena</option><option value="kn">Saint Kitts and Nevis</option><option value="lc">Saint Lucia</option><option value="pm">Saint Pierre and Miquelon</option><option value="vc">Saint Vincent and The Grenadines</option><option value="ws">Samoa</option><option value="sm">San Marino</option><option value="st">Sao Tome and Principe</option><option value="sa">Saudi Arabia</option><option value="sn">Senegal</option><option value="rs">Serbia</option><option value="sc">Seychelles</option><option value="sl">Sierra Leone</option><option value="sg">Singapore</option><option value="sk">Slovakia</option><option value="si">Slovenia</option><option value="sb">Solomon Islands</option><option value="so">Somalia</option><option value="za">South Africa</option><option value="es">Spain</option><option value="lk">Sri Lanka</option><option value="sd">Sudan</option><option value="sr">Suriname</option><option value="sj">Svalbard and Jan Mayen</option><option value="sz">Swaziland</option><option value="se">Sweden</option><option value="ch">Switzerland</option><option value="sy">Syrian Arab Republic</option><option value="tw">Taiwan Province of China</option><option value="tj">Tajikistan</option><option value="tz">Tanzania United Republic of</option><option value="th">Thailand</option><option value="tl">Timor-leste</option><option value="tg">Togo</option><option value="tk">Tokelau</option><option value="to">Tonga</option><option value="tt">Trinidad and Tobago</option><option value="tn">Tunisia</option><option value="tr">Turkey</option><option value="tm">Turkmenistan</option><option value="tc">Turks and Caicos Is.</option><option value="tv">Tuvalu</option><option value="ug">Uganda</option><option value="ua">Ukraine</option><option value="ae">United Arab Emirates</option><option value="gb">UK - United Kingdom</option><option value="us">US - United States</option><option value="uy">Uruguay</option><option value="uz">Uzbekistan</option><option value="vu">Vanuatu</option><option value="va">Vatican</option><option value="ve">Venezuela</option><option value="vn">Viet Nam</option><option value="vg">Virgin Islands British</option><option value="vi">Virgin Islands U.S.</option><option value="wf">Wallis and Futuna</option><option value="eh">Western Sahara</option><option value="ye">Yemen</option><option value="zm">Zambia</option><option value="zw">Zimbabwe</option></select><!--<span id="component137" class="formNoError">Country is missing.</span>--></div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Phone Number (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><input type="text" value="" size="20" name="form[PhoneNumber]" id="PhoneNumber" class="rsform-input-box">
                <!--<span id="component138" class="formNoError">Phone number is missing.</span>--></div>
            </div>
        </div>
        <div class="booking-form-legend">Where are you staying?</div>
        <div class="rsform-content rsf-hotel-group">
            <div class="rsfc-line">
                <div class="rsfcl-caption">Hotel Name (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><input type="text" value="" size="20" name="form[HotelName]" id="HotelName" class="rsform-input-box">
           <!--     <span id="component139" class="formNoError">Hotel name is missing.</span>--></div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Hotel Address (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body"><input type="text" value="" size="20" name="form[HotelAddress]" id="HotelAddress" class="rsform-input-box">
              <!--  <span id="component140" class="formNoError">Hotel address is missing.</span>-->
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">Room Number</div>
                <div class="rsfcl-body"><input type="text" value="" size="20" name="form[RoomNumber]" id="RoomNumber" class="rsform-input-box">
             <!--   <span id="component141" class="formNoError">Invalid Input</span>-->
                </div>
            </div>
        </div>
        <div class="booking-form-legend">How many people in your tour(s)?</div>
        <div class="rsfc-line" style="padding-left: 10px;" id="divTourInfo"></div>
        <div class="booking-form-legend">Total Price</div>
        <div class="rsform-content rsf-price-group">
            <div class="rsfc-line">
                <div class="rsfcl-c-total">Total in Vietnamese Dong</div>
                <div class="rsfcl-b-total"><input type="text" value="0" size="20" name="form[TotalVND]" id="TotalVND" readonly="readonly" class="rsform-input-box"></div>
                <div class="rsfcl-d-total">
                    <script type="text/javascript">
                        document.write("Conversion rate: $1 = " + document.getElementById('ExchangeRate').value + " VND");
                    </script>
                </div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-c-total">Total in US Dollars</div>
                <div class="rsfcl-b-total"><input type="text" value="0" size="20" name="form[Total]" id="Total" readonly="readonly" class="rsform-input-box"></div>
            </div>
            <div class="rsfc-line" id="depositotalline" style="display: none;">
                <div class="rsfcl-c-total">Required Deposit in USD</div>
                <div class="rsfcl-b-total"><input type="text" value="0" size="20" name="form[Deposit]" id="Deposit" readonly="readonly" disabled="disabled" class="rsform-input-box"></div>
            </div>
            <div class="rsfc-line" id="paymentline">
                <div class="rsfcl-caption">Payment (<span style="color:red;">*</span>)</div>
                <div class="rsfcl-body">
                    <div id="paymentoptions" style="padding-top: 10px;"><input name="form[Payment]" type="radio" value="0" id="Payment0" style=""><label for="Payment0" style="">I will pay in cash on the day of the tour</label><br style=""><input name="form[Payment]" type="radio" value="1" id="Payment1" style=""><label for="Payment1" style="">I will pay in full now</label><br style=""><input name="form[Payment]" type="radio" value="2" id="Payment2" disabled="disabled" style="display: none;"><label for="Payment2" style="display: none;">I only want to pay a deposit at this time</label><br style="display: none;"></div>
                    <div id="paypal-payment-badge" style="">
                        <img src="./upload/AM_SbyPP_mc_vs_dc_ae.jpg" border="0" alt="PayPal Acceptance Mark" title="Secure payment by PayPal">
                    </div>
                </div>
            </div>
<!--            <div class="rsfc-line">-->
<!--                <div class="rsfcl-caption">&nbsp;</div>-->
<!--                <div class="rsfcl-body" id="form-notice-before-submit" style="max-width: 360px;">Submitting this form <strong>DOES NOT</strong> mean that your tour is booked. Your booking is only finalized once you receive and reply to our confirmation email. If you do not hear back from us within 24 hours of your booking request, please check your SPAM or JUNK MAIL folder.</div>-->
<!--            </div>-->
            <div class="rsfc-line">
                <div class="rsfcl-caption" id="additional-comments">Additional comments</div>
                <div class="rsfcl-body"><textarea cols="50" rows="5" name="form[Message]" id="Message" style="width: 367px;" class="rsform-text-box"></textarea></div>
            </div>
        </div>
        <div class="rsform-content">
            <div class="rsfc-line">
                <div class="rsfcl-caption">&nbsp;</div>
                <div class="rsfcl-body"><button type="button" name="form[Review]" id="Review" class="review-btn stdButton regular gayblue rsform-button" style="font-weight: bold !important;">Review &amp; Submit</button></div>
            </div>
        </div>
        
        <!--
        <div class="rsform-content rsf-price-group">
            <div class="rsfc-line">
                <div class="rsfcl-caption"></div>
                <div class="rsfcl-body">{FooterNote:body}</div>
            </div>
            <div class="rsfc-line">
                <div class="rsfcl-caption">&nbsp;</div>
                <div class="rsfcl-body"><input type="submit" value="Submit" name="form[Submit]" id="Submit" onclick="Change();convertDateFormatForSQLMapping();" class="submit-booking-form-button rsform-submit-button" /></div>
            </div>
        </div>
        -->
        
        
        
        <script type="text/javascript">
            jQuery(document).ready(function($){
                BookingScript.init();
                PaymentScript.init();
            });
            jQuery(window).bind('beforeunload', function() {
                if( isChanged ) {
                    return "If you leave now, you will lose all changes.";
                }
            });
        </script>
        <script type="text/javascript">
            //elements
            var ePaymentCash = jQuery('#Payment0');
            var ePaymentFull = jQuery('#Payment1');
            var ePaymentDeposit = jQuery('#Payment2');
        </script>
        <script type="text/javascript">
            var BookingScript = function() {
                var handleAction = function() {
                    jQuery('#Review').click(function() {
        
                        if( isDenied ) {
                            alert(jQuery('#ReDenyShortNoticeBookingAnnounce').val());
                            return false;
                        }
        
                        if( !Check() ) {
                            return false;
                        }
        
                        Change();
                        convertDateFormatForSQLMapping();
                        
                        BookingScript.fillReviewContent();
                        jQuery('#modalReview').modal();
        
                        isChanged = true;
                        
                        BookingScript.setBookingDetails();
        
                    });
        
                    jQuery('#review-close-btn').click(function() {
                        BookingScript.clearReviewContent();
                    });
        
                }
        
                var handleElements = function() {
                    jQuery('.tour-quantity-select').change(function() {
                        var id = this.id;
                        var idVal = id.slice(-1);
                        var idValCal = parseInt(idVal) - 1;
        
                        CheckPrivateAvailable();
                        CalculateTotal();
                        BookingScript.setNumberNamesofTours();
        
                        if( jQuery(this).val() > 4 ) {
                            //display require text
                            //set deposit require flag true
                            //check selected date and alert if necessary
                            jQuery('#deposittexttour'+idVal).text(deposit_text).show();
                            isDepositRequire = true;
                            if( jQuery('#hiddencal8_'+idValCal).val() == '' ) {
                                //do nothing
                            }
                            else {
                                var cd = new Date(Date.parse(jQuery('#hiddencal8_'+idValCal).val()));
                                var td = new Date();
                                var tmr = new Date();
                                tmr.setDate(td.getDate()+1);
                                td = td.toDateString();
                                tmr = tmr.toDateString();
                                cd = cd.toDateString();
                                if (cd == td || cd == tmr) {
                                    //alert(jQuery('#DenyShortNoticeBookingAnnounce').val());
                                    //isDenied = true;
                                }
                            }
                        }
                        else {
                            //hide require text
                            //check selected date and alert if necessary
                            jQuery('#deposittexttour'+idVal).text('').hide();
                        }
        
                        PaymentScript.setPaymentOptions();
        
                    });
        
                    jQuery('#Country').change(function() {
                        jQuery('#CountryName').val( document.getElementById("Country").options[document.getElementById("Country").selectedIndex].text );
                    });
        
                }
        
                return {
                    init: function() {
                        handleAction();
                        handleElements();
                        BookingScript.disableTourDetails('Tour10');
                        BookingScript.disableTourDetails('Tour20');
                        BookingScript.disableTourDetails('Tour30');
                        BookingScript.disableTourDetails('Tour40');
                        BookingScript.checkToursSelectedState();
                        CheckPrivateAvailable();
                        ChangeTitle();
                        Change();
                        ChangeT1Time();
                        ChangeT3Time();
                        ChangeT4Time();
                        //jQuery('#form-notice-before-submit').html(jQuery('#NoticeBeforeSubmit').val());
                    },
                    submit: function() {
                        if( !Check() ) {
                            return;
                        }
                        
                        if (jQuery('#BookingDetails').val() == "") {
                            BookingScript.setBookingDetails();
                        }
                        
                        isChanged = false;
                        jQuery('.review-btn').attr("disabled","disabled");
                        jQuery('#review-submit-btn').text('Submitting...');
        
                        jQuery('#userForm').submit();
        
                    },
                    fillReviewContent: function() {
                        var reviewcontent = jQuery('#reviewcontent');
        
                        reviewcontent.html('');
        
                        reviewcontent.append('<p>You have requested to book ' + jQuery('#NumberofTours').val() + ' with XO Tours.</p>');
                        reviewcontent.append('<p><strong>Your booking details are as follows:</strong></p>');
        
                        BookingScript.sortToursByDate();
                        for(var j=0; j < sortedTours.length; j++) {
                            var id = sortedTours[j].substr(4,1);
                            reviewcontent.append( jQuery('#Tour'+id+'Details').val() );
                            reviewcontent.append('<br>');
                        }
        
                        var sPaymentMethod = "";
                        if( !document.getElementById("Payment0").disabled ) {
                            if( document.getElementById("Payment0").checked ) {
                                sPaymentMethod = ePaymentCash.next().text();
                                jQuery("#review-submit-btn").text("Submit booking");
                            }
                        }
                        if( !document.getElementById("Payment1").disabled ) {
                            if( document.getElementById("Payment1").checked ) {
                                sPaymentMethod = ePaymentFull.next().text();
                                jQuery("#review-submit-btn").text("Submit booking and Pay for tour");
                            }
                        }
                        if( !document.getElementById("Payment2").disabled ) {
                            if( document.getElementById("Payment2").checked ) {
                                sPaymentMethod = ePaymentDeposit.next().text();
                                jQuery("#review-submit-btn").text("Submit booking and Pay deposit");
                            }
                        }
        
                        reviewcontent.append('<p><strong>Your contact and hotel information:</strong></p>');
                        reviewcontent.append('<ul>' +
                                '<li>Phone: '+jQuery('#PhoneNumber').val()+'</li>' +
                                '<li>Email: '+jQuery('#EmailAddress').val()+'</li>' +
                                '<li>Nationality: '+jQuery('#CountryName').val()+'</li>' +
                                '</ul>' +
                                '<ul>' +
                                '<li>Hotel: '+jQuery('#HotelName').val()+'</li>' +
                                '<li>Hotel address: '+jQuery('#HotelAddress').val()+'</li>' +
                                '<li>Room number: '+jQuery('#RoomNumber').val()+'</li>' +
                                '</ul>');
                        reviewcontent.append('<br>');
                        reviewcontent.append('<div><strong>Additional comments</strong>: '+jQuery('#Message').val()+'</div>');
                        //reviewcontent.append('<hr style="margin-left: 0pt; width: 360px;" />');
                        reviewcontent.append('<br>');
        
                        if (!document.getElementById("Payment2").disabled && document.getElementById("Payment2").checked) {
                            reviewcontent.append('<p><strong>Total = $' + jQuery('#Total').val() +
                                    ' or ' + jQuery('#TotalVND').val() +
                                    ' Vietnamese Dong </strong>' + '' +
                                    '*** Current exchange rate: $1 = '+jQuery('#ExchangeRate').val()+' VND ***</p>');
        
                            reviewcontent.append('<p style="color: red;"><strong>'+jQuery('#DepositHidden').val()+'</strong></p>');
                        }
                        /*
                        if (jQuery('#DepositHidden').val() != '') {
                            reviewcontent.append('<p><strong>Total = $' + jQuery('#Total').val() +
                                    ' or ' + jQuery('#TotalVND').val() +
                                    ' Vietnamese Dong </strong>' + '' +
                                    '*** Current exchange rate: $1 = '+jQuery('#ExchangeRate').val()+' VND ***</p>');
        
                            reviewcontent.append('<p style="color: red;"><strong>'+jQuery('#DepositHidden').val()+'</strong></p>');
                        }
                        */
                        else {
                            reviewcontent.append('<p><strong style="color: red;">Total = $' + jQuery('#Total').val() +
                                    ' or ' + jQuery('#TotalVND').val() +
                                    ' Vietnamese Dong </strong>' + '' +
                                    '*** Current exchange rate: $1 = '+jQuery('#ExchangeRate').val()+' VND ***</p>');
                        }
        
                        reviewcontent.append('<p><strong>Payment method:</strong> ' + sPaymentMethod + '</p>');
        
                    },
                    clearReviewContent: function() {
                        jQuery('#reviewcontent').html('');
                        jQuery('#review-submit-btn').text("Submit booking");
                    },
                    setBookingDetails: function() {
                        jQuery('#BookingDetails').val('');
                        var string = "";
                        for(var j=0; j < sortedTours.length; j++) {
                            var id = sortedTours[j].substr(4,1);
                            string += jQuery('#Tour'+id+'Details').val();
                        }
                        jQuery('#BookingDetails').val(string);
                    },
                    setTourDetails: function(iTour, name) {
                        var content = "";
                        var i = iTour - 1;
                        if(document.getElementById('Tour'+iTour+'0').checked)
                        {
                            content = content + "<p style=\"color: blue;\"><strong>" + name + "</strong></p>";
                            content = content + "<ul>";
                            content = content + "<li>Number of people: " + document.getElementById('QuantityTour'+iTour).value + "</li>";
                            content = content + "<li>Date: " + document.getElementById('hiddencal8_'+i).value + "</li>";
                            content = content + "<li>Time: " + document.getElementById('TourTime'+iTour).value + "</li>";
                            if(document.getElementById('HelmetCamVideo'+iTour+'0').checked)
                                content = content + "<li>Helmet camera video: Yes</li>";
                            else
                                content = content + "<li>Helmet camera video: No</li>";
                            switch(iTour)
                            {
                                case 1:
                                {
                                    if(document.getElementById('Tour1MakePrivate0').disabled)
                                        content = content + "<li>Private tour option: N/A</li>";
                                    else if(document.getElementById('Tour1MakePrivate0').checked)
                                        content = content + "<li>Private tour option: Yes</li>";
                                    else
                                        content = content + "<li>Private tour option: No</li>";
                                    content = content + "<li>Subtotal: $" + subTotal1 + "</li>";
                                }
                                    break;
                                case 2:
                                {
                                    content = content + "<li>Things I want to buy: " + document.getElementById('Tour2Things').value + "</li>";
                                    content = content + "<li>Subtotal: $" + subTotal2 + "</li>";
                                }
                                    break;
                                case 3:
                                {
                                    content = content + "<li>Things I can't eat / I am allergic to: " + document.getElementById('Tour3FoodNotes').value + "</li>";
                                    if(document.getElementById('Tour3MakePrivate0').disabled)
                                        content = content + "<li>Private tour option: N/A</li>";
                                    else if(document.getElementById('Tour3MakePrivate0').checked)
                                        content = content + "<li>Private tour option: Yes</li>";
                                    else
                                        content = content + "<li>Private tour option: No</li>";
                                    content = content + "<li>Subtotal: $" + subTotal3 + "</li>";
                                }
                                    break;
                                case 4:
                                {
                                    content = content + "<li>Things I can't eat / I am allergic to: " + document.getElementById('Tour4FoodNotes').value + "</li>";
                                    if(document.getElementById('Tour4MakePrivate0').disabled)
                                        content = content + "<li>Private tour option: N/A</li>";
                                    else if(document.getElementById('Tour4MakePrivate0').checked)
                                        content = content + "<li>Private tour option: Yes</li>";
                                    else
                                        content = content + "<li>Private tour option: No</li>";
                                    content = content + "<li>Subtotal: $" + subTotal4 + "</li>";
                                }
                                    break;
                            }
                            content = content + "</ul>";
                        }
                        else { content = ""; }
                        document.getElementById('Tour'+iTour+'Details').value = content;
                    },
                    sortToursByDate: function() {
                        //merge checkedTours and sortedTours array
                        //then remove duplicates in checkedTours
                        //then empty sortedTours
                        checkedTours = checkedTours.concat(sortedTours);
                        checkedTours = checkedTours.filter( function( item, index, inputArray ) {
                            return inputArray.indexOf(item) == index;
                        });
                        sortedTours = new Array();
                        checkedTours.sort();
                        var id1;
                        var id2;
                        while(checkedTours.length) {
                            var minId = 0;
                            id1 = checkedTours[minId].substr(4,1);
                            id1 = parseInt(id1) - 1;
                            var d1 = new Date(Date.parse(jQuery('#hiddencal8_'+id1).val()));
                            for(var j = 1; j < checkedTours.length; j++) {
                                id2 = checkedTours[j].substr(4,1);
                                id2 = parseInt(id2) - 1;
                                var d2 = new Date(Date.parse(jQuery('#hiddencal8_'+id2).val()));
                                if( d1 > d2 ) {
                                    minId = j;
                                }
                                else if( d1 == d2 ) {
                                    //compare start time
                                    var t1Id = d1+1;
                                    var t2Id = d2+1;
                                    var tmp1 = jQuery('#TourTime'+t1Id).val().split(" ");
                                    var tmp2 = jQuery('#TourTime'+t2Id).val().split(" ");
                                    if( tmp1[1] == 'PM' ) {
                                        minId = j;
                                    }
                                }
                                else {}
                            }
                            var tmp = checkedTours.splice(minId,1);
                            sortedTours.push(tmp[0]);
                        }
                    },
                    setNumberNamesofTours: function() {
                        var t = "";
                        var names = "";
                        var n = 0;
                        var i;
                        for(i = 1; i <= tourNames.length; i++)
                        {
                            if(document.getElementById('Tour'+i+'0').checked)
                            {
                                if(n == 0) { names = names + tourNames[i-1]; }
                                else { names = names + ", " + tourNames[i-1]; }
                                BookingScript.setTourDetails(i,tourNames[i-1]);
                                n = n + 1;
                            }
                        }
                        switch(n)
                        {
                            case 1: t = "1 motorbike tour";
                                break;
                            case 2: t = "2 motorbike tours";
                                break;
                            case 3: t = "3 motorbike tours";
                                break;
                            case 4: t = "4 motorbike tours";
                                break;
                        }
                        document.getElementById('NumberofTours').value = t;
                        document.getElementById('NameofTours').value = names;
                    },
                    checkToursSelectedState: function() {
                        ShowHideDetails('Tour10', 'tourdetail1');
                        ShowHideDetails('Tour20', 'tourdetail2');
                        ShowHideDetails('Tour30', 'tourdetail3');
                        ShowHideDetails('Tour40', 'tourdetail4');
                    },
                    disableTourDetails: function(tour) {
                        switch (tour) {
                            case "Tour10":
                            {
                                document.getElementById('QuantityTour1').disabled = true;
                                document.getElementById('HelmetCamVideo10').disabled = true;
                                document.getElementById('Tour1MakePrivate0').disabled = true;
                                document.getElementById('txtcal8_0').disabled = true;
                                document.getElementById('btn8_0').disabled = true;
                                document.getElementById('TourTime1').disabled = true;
                                document.getElementById('Tour1Details').value = "";
                                document.getElementById('T1StateForSQLMapping').value = 0;
                                document.getElementById('T1DateFormatForSQLMapping').value = "0000-00-00";
                            } break;
                            case "Tour20":
                            {
                                document.getElementById('QuantityTour2').disabled = true;
                                document.getElementById('HelmetCamVideo20').disabled = true;
                                document.getElementById('txtcal8_1').disabled = true;
                                document.getElementById('btn8_1').disabled = true;
                                document.getElementById('TourTime2').disabled = true;
                                document.getElementById('Tour2Things').disabled = true;
                                document.getElementById('Tour2Details').value = "";
                                document.getElementById('T2StateForSQLMapping').value = 0;
                                document.getElementById('T2DateFormatForSQLMapping').value = "0000-00-00";
                            } break;
                            case "Tour30":
                            {
                                document.getElementById('QuantityTour3').disabled = true;
                                document.getElementById('HelmetCamVideo30').disabled = true;
                                document.getElementById('Tour3MakePrivate0').disabled = true;
                                document.getElementById('txtcal8_2').disabled = true;
                                document.getElementById('btn8_2').disabled = true;
                                document.getElementById('TourTime3').disabled = true;
                                document.getElementById('Tour3FoodNotes').disabled = true;
                                document.getElementById('Tour3Details').value = "";
                                document.getElementById('T3StateForSQLMapping').value = 0;
                                document.getElementById('T3DateFormatForSQLMapping').value = "0000-00-00";
                            } break;
                            case "Tour40":
                            {
                                document.getElementById('QuantityTour4').disabled = true;
                                document.getElementById('HelmetCamVideo40').disabled = true;
                                document.getElementById('Tour4MakePrivate0').disabled = true;
                                document.getElementById('txtcal8_3').disabled = true;
                                document.getElementById('btn8_3').disabled = true;
                                document.getElementById('TourTime4').disabled = true;
                                document.getElementById('Tour4FoodNotes').disabled = true;
                                document.getElementById('Tour4Details').value = "";
                                document.getElementById('T4StateForSQLMapping').value = 0;
                                document.getElementById('T4DateFormatForSQLMapping').value = "0000-00-00";
                            } break;
                            default : break;
                        }
                    },
                    enableTourDetails: function(tour) {
                        switch (tour) {
                            case "Tour10":
                            {
                                document.getElementById('QuantityTour1').disabled = false;
                                document.getElementById('HelmetCamVideo10').disabled = false;
                                CheckPrivateAvailable();
                                document.getElementById('txtcal8_0').disabled = false;
                                document.getElementById('btn8_0').disabled = false;
                                document.getElementById('TourTime1').disabled = false;
                                document.getElementById('T1StateForSQLMapping').value = 1;
                            } break;
                            case "Tour20":
                            {
                                document.getElementById('QuantityTour2').disabled = false;
                                document.getElementById('HelmetCamVideo20').disabled = false;
                                document.getElementById('txtcal8_1').disabled = false;
                                document.getElementById('btn8_1').disabled = false;
                                document.getElementById('TourTime2').disabled = false;
                                document.getElementById('Tour2Things').disabled = false;
                                document.getElementById('T2StateForSQLMapping').value = 1;
                            } break;
                            case "Tour30":
                            {
                                document.getElementById('QuantityTour3').disabled = false;
                                document.getElementById('HelmetCamVideo30').disabled = false;
                                CheckPrivateAvailable();
                                document.getElementById('txtcal8_2').disabled = false;
                                document.getElementById('btn8_2').disabled = false;
                                document.getElementById('TourTime3').disabled = false;
                                document.getElementById('Tour3FoodNotes').disabled = false;
                                document.getElementById('T3StateForSQLMapping').value = 1;
                            } break;
                            case "Tour40":
                            {
                                document.getElementById('QuantityTour4').disabled = false;
                                document.getElementById('HelmetCamVideo40').disabled = false;
                                CheckPrivateAvailable();
                                document.getElementById('txtcal8_3').disabled = false;
                                document.getElementById('btn8_3').disabled = false;
                                document.getElementById('TourTime4').disabled = false;
                                document.getElementById('Tour4FoodNotes').disabled = false;
                                document.getElementById('T4StateForSQLMapping').value = 1;
                            } break;
                            default : break;
                        }
                    }
                }
            }();
        </script>
        <script type="text/javascript">
            var PaymentScript = function() {
                return {
                    init: function() {
                        PaymentScript.disablePayDeposit();
                    },
                    checkDepositRequire: function() {
                        var nDeposit = 0;
                        for( var j=1; j<=4; j++ ) {
                            if( jQuery('#Tour'+j+'0').is(":checked") ) {
                                if( jQuery('#QuantityTour'+j).val() > 4 ) {
                                    var tmp = jQuery('#SubTotal'+j).val();
                                    var tmp2 = tmp.slice(1);
                                    nDeposit += parseInt(tmp2) / 100 * 20;
                                }
                            }
                        }
        
                        nDeposit = parseInt(nDeposit);
        
                        if(nDeposit) {
                            isDepositRequire = true;
                        }
                        else {
                            isDepositRequire = false;
                        }
        
                        return nDeposit;
                    },
                    setFlags: function() {
                        isDepositRequire = false;
                        isPayCashOnly = false;
                        isDenied = false;
                        for(var j=1; j<=4; j++) {
                            var i = j-1;
                            if( jQuery('#Tour'+j+'0').is(':checked') ) {
                                if( parseInt(jQuery('#QuantityTour'+j).val()) > 4 ) {
                                    isDepositRequire = true;
        
                                    var cd = new Date(Date.parse(jQuery('#hiddencal8_'+i).val()));
                                    cd = cd.toDateString();
                                    var td = new Date();
                                    var tmr = new Date();
                                    tmr.setDate(td.getDate()+1);
                                    td = td.toDateString();
                                    tmr = tmr.toDateString();
                                    if(cd == td || cd == tmr) {
                                        isDenied = true;
                                    }
                                }
                                else {
                                    var cd = new Date(Date.parse(jQuery('#hiddencal8_'+i).val()));
                                    cd = cd.toDateString();
                                    var td = new Date();
                                    var tmr = new Date();
                                    tmr.setDate(td.getDate()+1);
                                    td = td.toDateString();
                                    tmr = tmr.toDateString();
                                    if(cd == td || cd == tmr) {
                                        isPayCashOnly = true;
                                    }
                                }
                            }
                            //else: do nothing
                        }
                    },
                    setPaymentOptions: function() {
        
                        PaymentScript.setFlags();
        
                        if( isDenied ) {
                            //
                            return;
                        }
        
                        if( isPayCashOnly && isDepositRequire ) {
                            PaymentScript.enablePayCash();
                            PaymentScript.enablePayFull();
                            PaymentScript.enablePayDeposit();
                        }
                        else if( isPayCashOnly && !isDepositRequire ) {
                            PaymentScript.disablePayFull();
                            PaymentScript.disablePayDeposit();
                            jQuery('#paypal-payment-badge').hide();
                            PaymentScript.enablePayCash();
                        }
                        else if( isDepositRequire ) {
                            PaymentScript.disablePayCash();
                            PaymentScript.enablePayFull();
                            PaymentScript.enablePayDeposit();
                        }
                        else {
                            PaymentScript.enablePayCash();
                            PaymentScript.enablePayFull();
                            PaymentScript.disablePayDeposit();
                        }
        
                        PaymentScript.setPaymentText();
        
                    },
                    setPaymentText: function() {
                        if( !ePaymentCash.is(':disabled') ) {
                            if( ePaymentCash.is(':checked') ) {
                                jQuery('#PaymentHidden').val("Customer chose to pay in cash on the day of the tour.");
                                return;
                            }
                        }
                        if( !ePaymentFull.is(':disabled') ) {
                            if( ePaymentFull.is(':checked') ) {
                                jQuery('#PaymentHidden').val("Customer chose prepayment option (full) - need to confirm payment!");
                                return;
                            }
                        }
                        if( !ePaymentDeposit.is(':disabled') ) {
                            if( ePaymentDeposit.is(':checked') ) {
                                jQuery('#PaymentHidden').val("Customer chose prepayment option (deposit) - need to confirm payment!");
                                return;
                            }
                        }
                    },
                    disablePayFull: function() {
                        ePaymentFull.next().next().hide();
                        ePaymentFull.next().hide();
                        ePaymentFull.attr("disabled","disabled").hide();
                    },
                    disablePayDeposit: function() {
                        ePaymentDeposit.next().next().hide();
                        ePaymentDeposit.next().hide();
                        ePaymentDeposit.attr("disabled","disabled").hide();
                        PaymentScript.disableDepositElement();
                    },
                    disablePayCash: function() {
                        ePaymentCash.next().next().hide();
                        ePaymentCash.next().hide();
                        ePaymentCash.attr("disabled","disabled").hide();
                    },
                    enablePayFull: function() {
                        ePaymentFull.removeAttr("disabled").show();
                        ePaymentFull.next().show();
                        ePaymentFull.next().next().show();
                        jQuery('#paypal-payment-badge').show();
                    },
                    enablePayDeposit: function() {
                        ePaymentDeposit.removeAttr("disabled").show();
                        ePaymentDeposit.next().show();
                        ePaymentDeposit.next().next().show();
                        jQuery('#paypal-payment-badge').show();
                        PaymentScript.enableDepositElement();
                    },
                    enablePayCash: function() {
                        ePaymentCash.next().next().show();
                        ePaymentCash.next().show();
                        ePaymentCash.removeAttr("disabled").show();
                    },
                    disableDepositElement: function() {
                        jQuery('#depositotalline').hide();
                        jQuery('#Deposit').val('0').attr("disabled","disabled");
                        jQuery('#DepositHidden').val('');
                    },
                    enableDepositElement: function() {
                        var total = parseInt( jQuery('#Total').val() );
                        var deposit = total / 100 * 20;
                        deposit = parseInt(deposit);
                        jQuery('#depositotalline').show();
                        jQuery('#Deposit').removeAttr("disabled").val(deposit);
                        jQuery('#DepositHidden').val('Required Deposit = $'+deposit+' USD');
                
                jQuery('#DepositT1').val(parseInt(parseInt(jQuery('#SubTotal1').val().substr(1))/100*20));
                        jQuery('#DepositT2').val(parseInt(parseInt(jQuery('#SubTotal2').val().substr(1))/100*20));
                        jQuery('#DepositT3').val(parseInt(parseInt(jQuery('#SubTotal3').val().substr(1))/100*20));
                        jQuery('#DepositT4').val(parseInt(parseInt(jQuery('#SubTotal4').val().substr(1))/100*20));
                    }
                }
            }();
        </script>
        <input type="hidden" name="form[formId]" value="8"></form>
        <script type="text/javascript" src="./booking_files/cal.js"></script>
        <script type="text/javascript">//CALENDAR SETUP
        var MONTHS_SHORT 	 = Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
        var MONTHS_LONG 	 = Array("January","February","March","April","May","June","July","August","September","October","November","December");
        var WEEKDAYS_1CHAR  = Array("S","M","T","W","T","F","S");
        var WEEKDAYS_SHORT  = Array("Su","Mo","Tu","We","Th","Fr","Sa");
        var WEEKDAYS_MEDIUM = Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");
        var WEEKDAYS_LONG 	 = Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
        var START_WEEKDAY 	 = 0;</script>
        <script type="text/javascript" defer="defer">rsf_CALENDAR.util.Event.addListener(window, "load", rsfp_init(8,{ layouts: Array('POPUP','POPUP','POPUP','POPUP'), formats: Array('mmmm d, yyyy','mmmm d, yyyy','mmmm d, yyyy','mmmm d, yyyy'), values: Array('','','',''), extra: Array({},{},{},{}) }));</script>
        <script type="text/javascript">rsfp_paypal_items = document.getElementsByName('rsfp_paypal_item[]');
                    total = 0;
                    for(i=0;i<rsfp_paypal_items.length;i++)
                    {
                        total += parseFloat(rsfp_paypal_items[i].value);
                    }
                    total = number_format( total, 2, '.', ',' );
                    document.getElementById('paypal_total_8').innerHTML = total;document.getElementById('PaypalTotal').value = total;</script>
        
        
                        </div>
                        
                                        
                        
                    </div>
        
                    
                </div>
                
                    </div>
        
            
        </div>
        </div>
<!-- //CONTENT -->
        </div>
	</div>
	</div>
  <div>
      <form id="payPalForm" action = "https://www.sandbox.paypal.com/cgi-bin/webscr" method = "post" target="_blank">
          <input type="hidden" id="item_number" name="item_number" value="">
          <input type="hidden" name="cmd" value="_xclick">
          <input type="hidden" name="no_note" value="1">
          <input type="hidden" name="business" value="maithaiquoc@gmail.com">
          <input type="hidden" name="currency_code" value="USD">
          <input type="hidden" name="return" value="http://localhost:81/VBIKETOURS/success.php?vbt=<?php echo $vbt = md5(uniqid(rand())); ?>">
          <input type="hidden" name="cancel" value="http://localhost:81/VBIKETOURS/success.php?vbt=<?php echo $vbt; ?>">
          <input name="item_name" type="hidden" id="item_name" value="Check out for booking on vbiketours.com" size="45">
          <input name="amount" type="hidden" id="amount" value="" size="45">
      </form>
  </div>
</div>

<script>
    var myArr;
    var num = "<?php echo $totalProduct ?>";
    var paymentCode = "<?php echo $vbt ?>";

    window.onload = function(){
        var tName = "<?php echo $_POST['hidNameBookingNow'] ?>";
        var tPrice = "<?php echo $_POST['hidPriceBookingNow'] ?>";
        myArr = new Array();
        for(var i = 0; i < num; i++){
            if($('#Tour40'+i).val() == tName){
                $('#Tour40'+i).prop("checked", true);
                appendDiv(i);
                myArr.push(i);
            }
        }
        setMoney(tPrice*21000, tPrice);

        $('#hero').html('<ul class="list-unstyled" id="slideshow"><li class="active"> <img alt="" src="./images/slider.png" width="100%"> </li></ul>');
    };

    function addTour(){
        $('#divTourInfo').html('');
        myArr = new Array();
        for(var i = 0; i < num; i++){
            if($('#Tour40'+i).is(':checked') ){ //kiem tra neu checkbox khong duoc check
                myArr.push(i);
                appendDiv(i);
            }
        }
        setTotalPrice();
    }

    function appendDiv(i){
        $('#divTourInfo').append('<div class="rsfcl-caption" id="divTourName'+i+'">'+$('#Tour40'+i).val()+'</div>');
        $('#divTourInfo').append('<div class="rsfcl-body"><input type="number" onmouseout="setDefault(this.id)" value="1" min="1" id="PeopleAmount'+i+'" class="rsform-input-box" onchange="setTotalPrice();">');
        $('#divTourInfo').append('<label class="label label-success" style="margin: 20px 5px 20px 5px; color: white; font-size: 14px;">'+$("#idPrice"+i).val()+' $/person</label>');
        $('#divTourInfo').append('<br/></br>');
    }

    function setDefault(id){
        if($('#'+id).val() == '' || $('#'+id).val() == 0){
            $('#'+id).val(1);
        }
    }

    function setTotalPrice(isSubmit){
        var total = 0;
        var itemNumber = "";
        for(var i = 0; i < myArr.length; i++){
            var amount = $('#PeopleAmount'+myArr[i]).val();
            total += parseFloat($('#idPrice'+myArr[i]).val())*amount;
            itemNumber += $('#idProduct'+myArr[i]).val() + ", ";
        }

        if(isSubmit == 1){
            $('#item_number').val(itemNumber.substring(0,itemNumber.length-2));
            $('#amount').val(total);
            return total;
        }
        else{
            setMoney(total*21000, total);
        }
    }

    function setMoney(VND, USD){
        $('#TotalVND').val(new Intl.NumberFormat().format(VND));
        $('#Total').val(USD);
    }

    $('#Review').click(function(){
        var total = setTotalPrice(1);
        var tName = "";
        for(var i = 0; i < myArr.length; i++){
                tName += $('#Tour40'+myArr[i]).val() + " (" + $('#PeopleAmount'+myArr[i]).val() + " people), ";
        }
        //check chosen tours
        if(total == 0){
            alert("Please choose at least a tour...");
        }
        else{
            var title = $('#Title').val();
            var firstName = $('#FirstName').val();
            var lastName = $('#LastName').val();
            var emailAddress = $('#EmailAddress').val();
            var reEmailAddress = $('#ReEmailAddress').val();
            var nationality = $('#Country').val();
            var phoneNumber = $('#PhoneNumber').val();
            var hotelName = $('#HotelName').val();
            var hotelAddress = $('#HotelAddress').val();
            var roomNumber = $('#RoomNumber').val();
            var message = $('#Message').val();

            if(title == '' || firstName == '' || lastName == '' || emailAddress == '' || reEmailAddress == '' || nationality == '' || phoneNumber == '' || hotelName == '' || hotelAddress == ''){
                alert("The information with (*) symbol is required !");
            }
            else{
                if(emailAddress != reEmailAddress){
                    alert("Re-enter your email is not match !");
                }
                else{
                    if(!$('#Payment0').is(':checked') && !$('#Payment1').is(':checked')){
                        alert("Please choose a payment method...");
                    }
                    else{
                        var method = "Paypal payment";
                        if($('#Payment0').is(':checked')){
                            method = "Direct payment";
                        }

                        var dataString = "title="+title+"&firstName="+firstName+"&lastName="+lastName+"&emailAddress="+emailAddress+"&nationality="+nationality+"&phoneNumber="+phoneNumber+"&paymentCode="+paymentCode
                            +"&hotelName="+hotelName+"&hotelAddress="+hotelAddress+"&roomNumber="+roomNumber+"&method="+method+"&additional-comments="+message+"&tours="+tName.substring(0,tName.length-2)+"&total="+total;

                        if($('#Payment0').is(':checked')){
                            sendMail(dataString);
                        }
                        else{
                            insertBooking(dataString);
                        }
                    }
                }
            }
        }
    });

    function getStatus(){
        var dataString = "paymentCode="+paymentCode+"&functionName="+"getStatus";
        var time = setInterval(function(){
            $.ajax({
                type: "POST",
                url: "checkout/functions.php",
                data: dataString,
                success: function(x){
//                    alert(x);
                    if(x != 'InProgress'){
//                        alert(x);
                        window.close();
                    }

                    if(x == 0){
                        clearInterval(time);
                        alert("Error! Please refresh this page and try again...");
                    }
                }
            });
        }, 1000);
    }

    function insertBooking(dataString){
        var dataString = dataString+"&functionName="+"insertBooking";
//        alert(dataString);

        $.ajax({
            type: "POST",
            url: "checkout/functions.php",
            data: dataString,
            success: function(x){
//                alert(x);
                if(x == 1){
                    $('#payPalForm').submit();
                    getStatus();
                }
                else{
                    alert("Error! Please refresh this page and try again...");
                }
            }
        });
    }

    function sendMail(dataString){
        $.ajax({
            type: "POST",
            url: "phpmailer/vbiketours/booking_success.php",
            data: dataString,
            success: function(x){
                window.location.href = "success.php?dp=1";
            }
        });
    }
</script>